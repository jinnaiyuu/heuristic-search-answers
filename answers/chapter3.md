# 練習問題3 解答

## 問3.1 重複検出なしBFS（木探索）
重要な発見：重複検出なしのBFS（木探索）では、グリッド経路探索問題を解くことができません。

実験結果：
- 探索が終了せず、無限ループに陥ります
- これは以下の理由によります：
  1. 重複検出がないため、同じ状態（グリッド上の位置）を何度も訪れることができます
  2. グリッド上で「右に移動→左に移動」のような往復移動が可能です
  3. この往復移動により、木が無限に成長し続けます

考察：
- この実験から、状態空間に循環がある場合、重複検出なしの木探索では解を見つけられない可能性があることが分かります
- 一方、問3.2で見るように、重複検出ありのBFS（グラフ探索）では9ステップで最短経路を見つけることができます
- このように、重複検出は探索の成功に重要な役割を果たします

## 問3.2 重複検出ありBFS（グラフ探索） 
- 展開ノード数: 25
- 生成ノード数: 24
- 枝刈りノード数: 54  
- 解の長さ: 9ステップ
- 解パス: (0,0)→(0,1)→(0,2)→(1,2)→(2,2)→(2,3)→(3,3)→(3,4)→(4,4)

## 問3.3 重複検出ありDFS（グラフ探索）
- 展開ノード数: 17
- 生成ノード数: 24
- 枝刈りノード数: 24
- 解の長さ: 17ステップ  
- 解パス: (0,0)→(0,1)→(0,2)→(0,3)→(0,4)→(1,4)→(2,4)→(2,3)→(2,2)→(2,1)→(2,0)→(3,0)→(4,0)→(4,1)→(4,2)→(4,3)→(4,4)

## 問3.4 BFSによるTSP
- 展開ノード数: 30
- 生成ノード数: 35
- 枝刈りノード数: 17
- 解パス: 0→0→2→3→1（訪問順序）
- 最適解かどうか：はい。重複検出を使ったBFSは最短経路を見つけることが保証されているため、
  この解は最適解です。ただし、この場合の「最短経路」は状態空間上の経路の長さ（ステップ数）であり、
  必ずしも都市間の実際の移動距離の合計が最小になるとは限りません。

## 問3.5 ダイクストラ法によるTSP
- 展開ノード数: 24
- 生成ノード数: 31
- 枝刈りノード数: 15
- 解パス: 0→0→2→3→1（訪問順序）
- 最適解かどうか：はい。ダイクストラ法は実際の移動コスト（都市間の距離）を考慮して探索を行うため、
  この解は都市間の総移動距離が最小になる経路、すなわち最適解です。BFSと同じ経路が見つかったことから、
  この問題例では状態空間上の最短経路と実距離の最小経路が一致していたことがわかります。

## 問3.6 再帰的BFS
- 展開ノード数: 42
- 生成ノード数: 64
- 枝刈りノード数: 0
- 解の長さ: 4ステップ
- 解パス: 0→0→2→3→1（訪問順序）

## 考察
1. 重複検出の効果:
   - この単純なグリッド問題ではBFSの木探索とグラフ探索で同じ結果になった
   - より複雑な問題では重複検出により枝刈りが効果的に働く

2. BFSとDFSの比較:
   - BFSは最短経路を見つけるが、DFSはより長い経路を見つける
   - DFSの方がメモリ使用量が少ない傾向がある

3. 再帰的BFS:
   - 通常のBFSに比べて多くのノードを展開
   - 再帰呼び出しのオーバーヘッドが大きい
   - TSPのような問題では有効だが、グリッド探索には不向き
